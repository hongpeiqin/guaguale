# 刮刮乐小游戏

一个简单有趣的刮刮卡抽奖游戏，使用HTML、CSS和JavaScript实现，具有奖品管理、刮卡抽奖、中奖记录和兑奖功能。

## 游戏玩法

### 基本玩法

1. **添加奖品**：在左侧"奖品管理"区域添加奖品名称和数量
2. **刮卡抽奖**：点击上方刮刮卡区域，用鼠标或手指在卡片上刮动，当刮开面积超过50%时，自动显示奖品
3. **查看记录**：右侧"中奖记录"区域可以查看所有中奖历史
4. **兑换奖品**：在中奖记录中点击"兑奖"按钮，标记奖品已兑换
5. **重置游戏**：点击"重置游戏"按钮可以清空所有奖品和记录

### 游戏特点

- **随机抽奖**：根据奖品数量权重随机抽取奖品
- **本地存储**：使用localStorage保存奖品和中奖记录，刷新页面不会丢失数据
- **庆祝效果**：中奖时会显示彩色粒子庆祝效果
- **响应式设计**：支持电脑和移动设备操作
- **兑奖功能**：可以标记奖品已兑换，避免重复兑奖

## 技术实现

### 前端技术栈

- **HTML5**：页面结构和Canvas绘图
- **CSS**：使用Tailwind CSS框架实现界面样式
- **JavaScript**：实现游戏逻辑和交互功能
- **Canvas API**：实现刮刮卡效果
- **localStorage API**：本地数据存储

### 文件结构

- **index.html**：游戏界面HTML结构和CSS样式
- **script.js**：游戏逻辑和功能实现

## 代码结构

### 数据模型

- **prizes**：奖品数组，每个奖品包含名称(name)和数量(count)
- **records**：中奖记录数组，每条记录包含奖品名称(prize)、中奖时间(time)和兑奖时间(redeemTime)

### 主要功能模块

#### 初始化与渲染

- `init()`：初始化应用，加载数据，设置事件监听
- `renderPrizeList()`：渲染奖品列表
- `renderRecordList()`：渲染中奖记录列表

#### 奖品管理

- `addPrize()`：添加新奖品到奖品池
- `savePrizes()`：保存奖品数据到localStorage
- `saveRecords()`：保存中奖记录到localStorage

#### 刮刮卡功能

- `initScratchCard()`：初始化刮刮卡，随机选择奖品
- `drawScratchLayer()`：绘制刮刮卡蒙层
- `startDrawing()`：开始刮卡
- `draw()`：刮卡过程，计算刮开面积
- `stopDrawing()`：停止刮卡
- `getCoordinates()`：获取鼠标/触摸坐标
- `revealPrize()`：显示奖品，更新数据

#### 特效与交互

- `createConfetti()`：创建中奖庆祝效果
- `getRandomColor()`：获取随机颜色
- `resetGame()`：重置游戏数据
- `redeemPrize()`：兑换奖品功能

### 事件处理

- 鼠标事件：处理电脑端刮卡操作
- 触摸事件：处理移动端刮卡操作
- 表单提交：处理添加奖品
- 按钮点击：处理下一个、重置游戏、兑奖等操作

## 扩展与优化方向

1. **多种奖品类型**：可以扩展支持不同类型的奖品（实物、虚拟物品等）
2. **概率控制**：增加更精细的中奖概率控制
3. **用户账户**：添加用户登录功能，保存不同用户的中奖记录
4. **更多动画效果**：增加更丰富的动画和交互效果
5. **后端存储**：使用服务器存储数据，实现多设备同步
6. **防作弊机制**：增加防止作弊的安全措施

## 使用说明

1. 打开index.html文件即可开始游戏
2. 先在左侧添加一些奖品
3. 在刮刮卡区域刮开卡片查看中奖结果
4. 中奖后可以在右侧记录中点击兑奖
5. 如需重置游戏，点击"重置游戏"按钮

---

游戏数据使用浏览器的localStorage存储，清除浏览器缓存会导致数据丢失。